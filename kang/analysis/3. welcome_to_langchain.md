## 3. Welcome to langchain

### 3.0 LLMs and Chat Models

ğŸ“**Model**

```python
# OpenAI
model_name: str = Field(default="text-davinci-003", alias="model")

# ChatOpenAI
model_name: str = Field(default="gpt-3.5-turbo", alias="model")
```

- [OpenAI overview](https://platform.openai.com/docs/models/overview)
  - gpt-3.5-turbo: ì±„íŒ…ì— íŠ¹í™”ëœ ëª¨ë¸

### 3.1 Predict Messages

ğŸ“**Model Parameters**

- temperature: ëª¨ë¸ì´ ì–¼ë§ˆë‚˜ ì°½ì˜ì ì¸ì§€ë¥¼ ê²°ì • (low-ë³´ìˆ˜ì , high-ì°½ì˜ì , range-(0,1))

ğŸ“**Message Type**

- HumanMessage: ë‚˜ì˜ ì§ˆë¬¸
- AIMessage: AIì— ì˜í•´ ë³´ë‚´ì§€ëŠ” ê²ƒ
  - ëŒ€í™” ê¸°ë¡ì´ë¼ê³  ë³´ë©´ í¸í•¨
- SystemMessage: LLMì— ì„¤ì •ì„ ì œê³µí•˜ê¸° ìœ„í•¨
  - AIì— ê¸°ë³¸ ì„¤ì •, ê¸°ë³¸ ê°’ ë“±

### 3.2 Prompt Templates

ğŸ‘€ **Template**

> í”„ë¡¬í”„íŠ¸ë¥¼ êµ¬ì¡°í™”í•˜ê³  í…ìŠ¤íŠ¸ ìƒì„± ëª¨ë¸ì— ì „ë‹¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿

ğŸ“**Template Type**

- ChatPromptTemplate: message â˜ template
- PromptTemplate: string â˜ template

### 3.3 OutputParser and LCEL

ğŸ“**Output Parser**

```python
class Parser(BaseOutputParser):

    def parse(self, text):
        return text
```

- parser class ìƒì„±
- BaseOutputParser ìƒì†
- parseëŠ” BaseOutputParserì˜ abstract method
  - classì—ì„œ ì¬ì •ì˜ ìˆ˜í–‰

ğŸ“Œ**Output Parserê°€ í•„ìš”í•œ ì´ìœ **

- LLMì˜ ì‘ë‹µì„ ë³€í˜•í•´ì•¼ í•  ë•Œê°€ ìˆìŒ
  - (ex) ì‘ë‹µì„ dictionary, list ë“± ì ìš©ì ì— ë”°ë¼ ë°”ê¿”ì•¼í•  ê²½ìš°

ğŸ“**LCEL**

- chain
  - ì—¬ëŸ¬ ìš”ì†Œë“¤ì„ ë¬¶ì–´ì„œ í•˜ë‚˜ì˜ ì‹¤í–‰ì²˜ëŸ¼ ë³´ì´ê²Œ í•¨
- invoke
  - chainì˜ ì‹¤í–‰ method
  - dictionary typeì´ inputìœ¼ë¡œ ë“¤ì–´ê°€ì•¼í•¨

### 3.4 Chaining Chains

â¤ï¸â€ğŸ”¥ **interface**

- [langchain interface](https://python.langchain.com/v0.1/docs/expression_language/interface/#input-schema)

| Component    | Input Type                                            | Output Type           |
| ------------ | ----------------------------------------------------- | --------------------- |
| Prompt       | Dictionary                                            | PromptValue           |
| ChatModel    | Single string, list of chat messages or a PromptValue | ChatMessage           |
| LLM          | Single string, list of chat messages or a PromptValue | String                |
| OutputParser | The output of an LLM or ChatModel                     | Depends on the parser |
| Retriever    | Single string                                         | List of Documents     |
| Tool         | Single string or dictionary, depending on the tool    | Depends on the tool   |

ğŸŒˆ **Example**

```python
chain = template | chat | p

chain.invoke({
    "max_items": 5,
    "question": "What are the pokemons?"
})
```

1. invoke
2. template
   - input: dictionary
   - output: promt value
3. chat
   - input: prompt value
   - output: chat message
4. outputparser
   - input: chat message
